<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/login.css}" href="/css/login.css">
    <link rel="stylesheet" th:href="@{/css/dashbord.css}" href="/css/dashbord.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://unpkg.com/bs-brain@2.0.3/components/navbars/navbar-1/assets/css/navbar-1.css">
</head>


<body>
<div th:replace="fragments/dashbordfrag :: dashheader"></div>
<div th:replace="fragments/dashbordfrag :: sidenav"></div>
    <section id="login-section" style="height:91vh;width:83vw">
        <div class="d-flex justify-content-center align-items-center  h-100 w-100">
            <div class="login-div" style="height:550px">
                <div class="row text-light ">


                    <form id="passwordpage" action="/changepassword" method="POST">
                        <label class="text-primary fs-1">Email id</label><br>
                        <input class="input_main" type="email" name="email" th:value="${email}"><br>
                        <label>Existing Password</label><br>
                        <input class="input_main" id="password" type="password" name="existingpassword" style="padding:5px"><br>
                        <p id="pass_error" style="color:red ;"></p>


                        <p id="pass_error" style="color:red ;"></p>
                        <label>new Password</label><br>

                        <input class="input_main" id="confirmpassword" type="password" name="newpassword"><br>
                        <p id="confirmpass_error" style="color:red"></p>
                        </p>
                        <button class="submit" type="submit" value="Submit">Submit</button>
                    </form>

                </div>

            </div>
        </div>
    </section>

    <script type="text/javascript">





        var myform = document.querySelector("#passwordpage");

        myform.addEventListener('submit', function (e) {
            if (!forgot()) {
                e.preventDefault();
            }
        });

        function forgot() {
            var success = true;
            var pass = document.querySelector("#password").value.trim();
            var confirmpass = document.querySelector("#confirmpassword").value.trim();
            var pass_error = document.querySelector("#pass_error");
            var confirmpass_error = document.querySelector("#confirmpass_error");

            if (!/^[0-9 ]+$/.test(pass)) {
                success = false;
                pass_error.textContent = "Password must be numeric";
            } else if (pass.includes(' ')) {
                success = false;
                pass_error.textContent = "Password must not contain spaces";
            }
            else if (pass.length !== 8) {
                success = false;
                pass_error.textContent = "Your password must contain 8 numbers";
            } else {
                pass_error.textContent = "";
            }

            if (pass == confirmpass) {
                success = false;
                confirmpass_error.textContent = "both is same password please try different password";
            }

            return success;
        }





    </script>

</body>

</html>

</body>

</html>